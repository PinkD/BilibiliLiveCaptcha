# Bilibili Live Captcha

b站 [直播验证码](https://api.live.bilibili.com/lottery/v1/SilverBox/getCaptcha) 识别， 基于 `tensorflow` ，使用了 `keras` 框架


## 思路

### 预处理和过渡方案

- 先手动标注了1k+张验证码，然后通过卷积去除噪声，再将图片分割成一个个数字，再进行单独的识别，达到一定的正确率
- 将上述模型用于自动识别验证码，跑了1w+张，手动检测识别结果中出现的错误，得到了1w+张的验证码的训练集


### 直接方案

- 将上述的标注好的数据集用另一个模型训练，发现出现了过拟合，数据集不够
- 弃疗，直接使用过渡方案中生成验证码的方法跑了3w+张，和之前手动检查过的一起训练，使用手动标注的1k+作为验证集


## 数据集

注：数据集都将图片转换成了灰度图

- `img/full/no_timestamp` 使用 `downloader.py` 中被注释的代码纯手工标注，1k+张
- `img/number` 使用 `image_to_num_img.py` 生成的单个数字的图片（可生成，不包含在库中
- `img/conv_out` 使用 `convolution.py` 处理过的图片（可生成，不含在库中
- `img/full/unchecked` 使用 `downloader.py` 下载的图片，使用过渡方案标注，有一定错误率（可生成，不含在库中
- `img/full/labeled` 手工检测过的使用过渡方案生成的数据集


## 网络

- `train/number/train.py` 训练过渡模型
- `train/full/train.py` 训练最终模型
- 使用的卷积神经网络。因为没有经验，对网络的定义没有什么依据，等以后有经验了再修改一下吧（咕咕咕


## 结果

经过训练后，在测试数据集上可以达到 `98.10%` 的准确率


## 提升空间

- 大部分数据没有经过检测（ `1w / (1w + 3w)` )，因此数据集本身就有误差
- 对神经网络的结构的研究不深，不知道什么样的神经网络更加合适
- 将图片手动卷积一次，可以更加容易识别，但是不清楚这样做有没有什么明显的提升


## 总结

- 预处理
- 这是PinkD的第一次将ML用来解决问题的实践
- 我好菜啊
